(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22a2f81b"],{"0ccb":function(e,t,n){var r=n("50c4"),a=n("1148"),i=n("1d80"),o=Math.ceil,c=function(e){return function(t,n,c){var s,l,d=String(i(t)),u=d.length,p=void 0===c?" ":String(c),f=r(n);return f<=u||""==p?d:(s=f-u,l=a.call(p,o(s/p.length)),l.length>s&&(l=l.slice(0,s)),e?d+l:l+d)}};e.exports={start:c(!1),end:c(!0)}},1148:function(e,t,n){"use strict";var r=n("a691"),a=n("1d80");e.exports="".repeat||function(e){var t=String(a(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"1d01":function(e,t,n){},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),o=n("ad6d"),c="toString",s=RegExp.prototype,l=s[c],d=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=c;(d||u)&&r(RegExp.prototype,c,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in s)?o.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"2c3e":function(e,t,n){var r=n("83ab"),a=n("9f7f").UNSUPPORTED_Y,i=n("9bf2").f,o=n("69f3").get,c=RegExp.prototype;r&&a&&i(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==c){if(this instanceof RegExp)return!!o(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},"4d63":function(e,t,n){var r=n("83ab"),a=n("da84"),i=n("94ca"),o=n("7156"),c=n("9bf2").f,s=n("241c").f,l=n("44e7"),d=n("ad6d"),u=n("9f7f"),p=n("6eeb"),f=n("d039"),m=n("69f3").set,g=n("2626"),b=n("b622"),h=b("match"),v=a.RegExp,w=v.prototype,x=/a/g,y=/a/g,k=new v(x)!==x,E=u.UNSUPPORTED_Y,O=r&&i("RegExp",!k||E||f((function(){return y[h]=!1,v(x)!=x||v(y)==y||"/a/i"!=v(x,"i")})));if(O){var j=function(e,t){var n,r=this instanceof j,a=l(e),i=void 0===t;if(!r&&a&&e.constructor===j&&i)return e;k?a&&!i&&(e=e.source):e instanceof j&&(i&&(t=d.call(e)),e=e.source),E&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var c=o(k?new v(e,t):v(e,t),r?this:w,j);return E&&n&&m(c,{sticky:n}),c},D=function(e){e in j||c(j,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},S=s(v),N=0;while(S.length>N)D(S[N++]);w.constructor=j,j.prototype=w,p(a,"RegExp",j)}g("RegExp")},"4d90":function(e,t,n){"use strict";var r=n("23e7"),a=n("0ccb").start,i=n("9a0c");r({target:"String",proto:!0,forced:i},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").find,i=n("44d2"),o=n("ae40"),c="find",s=!0,l=o(c);c in[]&&Array(1)[c]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(c)},"9a0c":function(e,t,n){var r=n("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},"9d19":function(e,t,n){"use strict";n("1d01")},ed08:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));n("53ca"),n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("159b");function r(e,t){var n=[];return e.forEach((function(a){if(a.pid===t){var i=r(e,a.id);i.length&&(a.children=i),n.push(a)}})),n}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=new Date(24*(e-25567)*36e5-3e5-43e3-864e5-864e5);n.setYear(n.getFullYear());var r=n.getFullYear()+"",a=n.getMonth()+1+"",i=n.getDate()+"";return t&&1===t.length?r+t+a+t+i:r+(a<10?"0"+a:a)+(i<10?"0"+i:i)}},fb3b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"departments-container"},[n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"组织架构",name:"first"}},[n("el-row",{staticClass:"department-header",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:20}},[n("i",{staticClass:"el-icon-s-home"}),n("span",{staticClass:"company"},[e._v("江苏传智播客教育科技股份有限公司")])]),n("el-col",{attrs:{span:4}},[n("el-row",{attrs:{type:"flex",justify:"end"}},[n("el-col",[e._v("负责人")]),n("el-col",[n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[e._v(" 操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.add()}}},[e._v("添加子部门")])],1)],1)],1)],1)],1)],1),n("el-tree",{staticClass:"departments-tree",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!0},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.data;return[n("el-row",{staticStyle:{width:"100%",height:"40px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:20}},[n("span",[e._v(e._s(r.name))])]),n("el-col",{attrs:{span:4}},[n("el-row",{attrs:{type:"flex",justify:"end"}},[n("el-col",[e._v(e._s(r.manager))]),n("el-col",[n("el-dropdown",[n("span",[e._v(" 操作"),n("i",{staticClass:"el-icon-arrow-down"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.add(r)}}},[e._v("添加子部门")]),n("el-dropdown-item",{nativeOn:{click:function(t){return e.edit(r)}}},[e._v("编辑部门")]),r&&!r.children?n("el-dropdown-item",{nativeOn:{click:function(t){return e.del(r)}}},[e._v("删除部门")]):e._e()],1)],1)],1)],1)],1)],1)]}}])})],1)],1)],1)]),n("depart-dialog",{ref:"departDialog",attrs:{"dialog-visible":e.dialogVisible,"origin-list":e.originList,"employees-simple-list":e.employeesSimpleList,"is-edit":e.isEdit,"click-depart-id":e.clickDepartId},on:{"update:dialogVisible":function(t){e.dialogVisible=t},"update:dialog-visible":function(t){e.dialogVisible=t},addDepartEV:e.addDepartFn}})],1)])},a=[],i=n("c7eb"),o=n("1da1"),c=(n("d81d"),n("b0c0"),n("365c")),s=n("ed08"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:e.isEdit?"编辑部门":"添加子部门",visible:e.dialogVisible,width:"50%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"before-close":e.handleClose},on:{"update:visible":[function(t){e.dialogVisible=t},function(t){return e.$emit("update:dialogVisible",!1)}],close:e.dialogCloseFn}},[n("el-form",{ref:"deptForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"2-10个字符"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"部门编码",prop:"code"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"1-20个字符"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),n("el-form-item",{attrs:{label:"部门负责人",prop:"manager"}},[n("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},model:{value:e.form.manager,callback:function(t){e.$set(e.form,"manager",t)},expression:"form.manager"}},e._l(e.employeesSimpleList,(function(e){return n("el-option",{key:e.id,attrs:{value:e.username}})})),1)],1),n("el-form-item",{attrs:{label:"部门介绍",prop:"introduce"}},[n("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"1-300个字符",type:"textarea",rows:3},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancelFn}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmFn}},[e._v("确 定")])],1)],1)],1)},d=[],u=n("5530"),p=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("7db0"),{props:{dialogVisible:{type:Boolean},employeesSimpleList:{type:Array,default:function(){return[]}},originList:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1},clickDepartId:{type:String,default:function(){return""}}},data:function(){var e=this,t=function(t,n,r){var a=e.originList.map((function(e){return e.code}));if(e.isEdit){var i=e.originList.filter((function(t){return t.id!==e.clickDepartId}));a=i.map((function(e){return e.code}))}a.includes(n)?r(new Error("部门编码".concat(n,"已经存在了"))):r()},n=function(t,n,r){var a=e.originList.filter((function(t){return t.pid===e.clickDepartId})).map((function(e){return e.name}));if(e.isEdit){var i=e.originList.find((function(t){return t.id===e.clickDepartId})),o=i.pid;a=e.originList.filter((function(t){return t.pid===o&&t.id!==e.clickDepartId})).map((function(e){return e.name}))}a.includes(n)?r(new Error("部门名字".concat(n,"已经存在了"))):r()};return{form:{name:"",code:"",manager:"",introduce:""},rules:{name:[{required:!0,message:"部门名称不能为空",trigger:"blur"},{min:2,max:10,message:"部门名称要求2-10个字符",trigger:"blur"},{validator:n,trigger:"blur"}],code:[{required:!0,message:"部门编码不能为空",trigger:"blur"},{min:1,max:20,message:"部门编码要求1-20个字符",trigger:"blur"},{validator:t,trigger:"blur"}],manager:[{required:!0,message:"部门负责人不能为空",trigger:"change"}],introduce:[{required:!0,message:"部门介绍不能为空",trigger:"blur"},{min:1,max:300,message:"部门介绍要求1-300个字符",trigger:"blur"}]}}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},cancelFn:function(){this.$emit("update:dialogVisible",!1)},confirmFn:function(){var e=this;this.$refs.deptForm.validate((function(t){t&&(e.$emit("addDepartEV",Object(u["a"])({},e.form)),e.$emit("update:dialogVisible",!1))}))},dialogCloseFn:function(){this.form={name:"",code:"",manager:"",introduce:""},this.$refs.deptForm.resetFields()}}}),f=p,m=n("2877"),g=Object(m["a"])(f,l,d,!1,null,null,null),b=g.exports,h={name:"Departments",components:{departDialog:b},data:function(){return{activeName:"first",treeData:[{departName:"总裁办",name:"孙财"},{departName:"行政部",name:"罗晓晓"},{departName:"人事部",name:"安小晴",children:[{departName:"财务核算部"}]},{departName:"财务部",name:"",children:[{departName:"财务核算部"},{departName:"税务管理部"},{departName:"薪资管理部"}]},{departName:"技术部",name:"",children:[{departName:"前端技术部"},{departName:"后端技术部"}]},{departName:"运营部",name:""},{departName:"市场部",name:"武高丽",children:[{departName:"市场部1"},{departName:"市场部2"}]}],defaultProps:{children:"children",label:"departName"},dialogVisible:!1,employeesSimpleList:[],clickDepartId:"",isEdit:!1,originList:[]}},created:function(){this.getDepartmentsListFn(),this.getEmployeesSimpleListFn()},methods:{getDepartmentsListFn:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["k"])();case 2:n=t.sent,e.originList=n.data.depts.map((function(e){return{id:e.id,code:e.code,name:e.name,pid:e.pid}})),e.treeData=Object(s["b"])(n.data.depts,"");case 5:case"end":return t.stop()}}),t)})))()},getEmployeesSimpleListFn:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["m"])();case 2:n=t.sent,e.employeesSimpleList=n.data;case 4:case"end":return t.stop()}}),t)})))()},handleClick:function(e,t){console.log(e,t)},handleNodeClick:function(e,t,n){},add:function(e){this.clickDepartId=void 0===e?"":e.id,this.dialogVisible=!0,this.isEdit=!1},edit:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.clickDepartId=e.id,t.dialogVisible=!0,t.isEdit=!0,n.next=5,Object(c["j"])(e.id);case 5:r=n.sent,t.$refs.departDialog.form=r.data;case 7:case"end":return n.stop()}}),n)})))()},del:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["f"])(e.id);case 2:r=n.sent,t.$message.success(r.message),t.getDepartmentsListFn();case 5:case"end":return n.stop()}}),n)})))()},addDepartFn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.isEdit){n.next=5;break}return n.next=3,Object(c["x"])(e);case 3:n.next=8;break;case 5:return e.pid=t.clickDepartId,n.next=8,Object(c["a"])(e);case 8:t.getDepartmentsListFn();case 9:case"end":return n.stop()}}),n)})))()}}},v=h,w=(n("9d19"),Object(m["a"])(v,r,a,!1,null,"1a2aa704",null));t["default"]=w.exports}}]);