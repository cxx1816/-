(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d47aeede"],{"0ccb":function(e,t,n){var r=n("50c4"),a=n("1148"),i=n("1d80"),s=Math.ceil,o=function(e){return function(t,n,o){var c,l,u=String(i(t)),p=u.length,d=void 0===o?" ":String(o),f=r(n);return f<=p||""==d?u:(c=f-p,l=a.call(d,s(c/d.length)),l.length>c&&(l=l.slice(0,c)),e?u+l:l+u)}};e.exports={start:o(!1),end:o(!0)}},1148:function(e,t,n){"use strict";var r=n("a691"),a=n("1d80");e.exports="".repeat||function(e){var t=String(a(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),s=n("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=l.name!=o;(u||p)&&r(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"2c3e":function(e,t,n){var r=n("83ab"),a=n("9f7f").UNSUPPORTED_Y,i=n("9bf2").f,s=n("69f3").get,o=RegExp.prototype;r&&a&&i(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!s(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},4041:function(e,t,n){"use strict";n("efd2")},"4d63":function(e,t,n){var r=n("83ab"),a=n("da84"),i=n("94ca"),s=n("7156"),o=n("9bf2").f,c=n("241c").f,l=n("44e7"),u=n("ad6d"),p=n("9f7f"),d=n("6eeb"),f=n("d039"),b=n("69f3").set,m=n("2626"),h=n("b622"),g=h("match"),v=a.RegExp,y=v.prototype,x=/a/g,w=/a/g,j=new v(x)!==x,O=p.UNSUPPORTED_Y,k=r&&i("RegExp",!j||O||f((function(){return w[g]=!1,v(x)!=x||v(w)==w||"/a/i"!=v(x,"i")})));if(k){var R=function(e,t){var n,r=this instanceof R,a=l(e),i=void 0===t;if(!r&&a&&e.constructor===R&&i)return e;j?a&&!i&&(e=e.source):e instanceof R&&(i&&(t=u.call(e)),e=e.source),O&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var o=s(j?new v(e,t):v(e,t),r?this:y,R);return O&&n&&b(o,{sticky:n}),o},F=function(e){e in R||o(R,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},E=c(v),S=0;while(E.length>S)F(E[S++]);y.constructor=R,R.prototype=y,d(a,"RegExp",R)}m("RegExp")},"4d90":function(e,t,n){"use strict";var r=n("23e7"),a=n("0ccb").start,i=n("9a0c");r({target:"String",proto:!0,forced:i},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"55be":function(e,t,n){},"61c2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"setting-container"},[n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card"},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"角色管理",name:"first"}},[n("el-row",{staticStyle:{height:"60px"}},[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.addRoleBtnFn}},[e._v("新增角色")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"120"}}),n("el-table-column",{attrs:{prop:"name",label:"角色名",width:"240"}}),n("el-table-column",{attrs:{prop:"description",label:"描述"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(n){return e.setRoles(t.row)}}},[e._v("分配权限")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.editRoles(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){return e.delRoles(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.query.page,"page-sizes":[5,10,15,20,25],"page-size":e.query.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"公司信息"}},[n("el-alert",{attrs:{title:"对公司名称、公司地址、营业执照、公司地区的更新，将使得公司资料被重新审核，请谨慎修改",type:"info","show-icon":"",closable:!1}}),n("el-form",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"公司名称"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:""},model:{value:e.companyObj.name,callback:function(t){e.$set(e.companyObj,"name",t)},expression:"companyObj.name"}})],1),n("el-form-item",{attrs:{label:"公司地址"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:""},model:{value:e.companyObj.companyAddress,callback:function(t){e.$set(e.companyObj,"companyAddress",t)},expression:"companyObj.companyAddress"}})],1),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:""},model:{value:e.companyObj.mailbox,callback:function(t){e.$set(e.companyObj,"mailbox",t)},expression:"companyObj.mailbox"}})],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:3,disabled:""},model:{value:e.companyObj.remarks,callback:function(t){e.$set(e.companyObj,"remarks",t)},expression:"companyObj.remarks"}})],1)],1)],1)],1)],1),n("el-dialog",{attrs:{title:e.isEdit?"编辑角色":"新增角色","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t},close:e.roleDialogCloseFn}},[n("el-form",{ref:"roleForm",attrs:{model:e.roleForm,rules:e.roleRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[n("el-input",{model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),n("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[n("el-input",{model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}})],1)],1),n("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{size:"small"},on:{click:e.cancelRoles}},[e._v("取消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.roleSubmit}},[e._v("确定")])],1)],1)],1),n("el-dialog",{attrs:{title:"分配权限点",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.perDialogCloseFn}},[n("assign-permission",{attrs:{"permission-list":e.permissionList,"perm-ids":e.permIds},on:{addPerEv:e.addPermissionFn},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}})],1)],1)])},a=[],i=n("c7eb"),s=n("1da1"),o=n("365c"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tree",{ref:"theTree",attrs:{data:e.permissionList,props:{label:"name"},"show-checkbox":"","default-expand-all":"","check-strictly":"","node-key":"id"}}),n("el-row",{staticClass:"footer",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.setRolesBtn}},[e._v("确 定")]),n("el-button",{attrs:{size:"small"},on:{click:e.cancelButton}},[e._v("取 消")])],1)],1)],1)},l=[],u={name:"AssignPermission",props:{permissionList:{type:Array,default:function(e){return[]}},permIds:{type:Array,default:function(){return[]}}},data:function(){return{}},watch:{permIds:function(){this.$refs.theTree.setCheckedKeys(this.permIds)}},created:function(){console.log(this.roleId)},methods:{cancelButton:function(){this.$emit("input",!1)},setRolesBtn:function(){this.$emit("addPerEv",this.$refs.theTree.getCheckedKeys()),this.$emit("input",!1)}}},p=u,d=(n("6b6d"),n("2877")),f=Object(d["a"])(p,c,l,!1,null,"ae8095f0",null),b=f.exports,m=n("ed08"),h={components:{AssignPermission:b},data:function(){return{activeName:"first",query:{page:1,pagesize:10},rolesList:[],total:0,companyObj:{},showDialog:!1,roleForm:{name:"",description:""},roleRules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],description:[{required:!0,message:"角色描述不能为空",trigger:"blur"}]},isEdit:!1,dialogVisible:!1,permissionList:[],permIds:[],clickRoleId:""}},created:function(){this.getRoleListFn(),this.getCompanyDetailFn(),this.getPermissionListFn()},methods:{getPermissionListFn:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["o"])();case 2:n=t.sent,console.log(n),e.permissionList=Object(m["b"])(n.data,"0");case 5:case"end":return t.stop()}}),t)})))()},getRoleListFn:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["r"])(e.query);case 2:n=t.sent,e.rolesList=n.data.rows,e.total=n.data.total;case 5:case"end":return t.stop()}}),t)})))()},getCompanyDetailFn:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var n,r,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["p"])();case 2:return n=t.sent,r=n.data.companyId,t.next=6,Object(o["i"])(r);case 6:a=t.sent,e.companyObj=a.data;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.query.pagesize=e,this.getRoleListFn()},handleCurrentChange:function(e){this.query.page=e,this.getRoleListFn()},setRoles:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.clickRoleId=e.id,t.dialogVisible=!0,n.next=4,Object(o["q"])(e.id);case 4:r=n.sent,t.permIds=r.data.permIds;case 6:case"end":return n.stop()}}),n)})))()},editRoles:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isEdit=!0,t.showDialog=!0,n.next=4,Object(o["q"])(e.id);case 4:r=n.sent,t.roleForm=r.data;case 6:case"end":return n.stop()}}),n)})))()},delRoles:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(o["h"])(e.id);case 2:1===t.rolesList.length&&(t.query.page--,0===t.query.page&&(t.query.page=1)),t.getRoleListFn();case 4:case"end":return n.stop()}}),n)})))()},roleSubmit:function(){var e=this;this.$refs.roleForm.validate(function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(n){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}if(!e.isEdit){t.next=6;break}return t.next=4,Object(o["A"])(e.roleForm);case 4:t.next=8;break;case 6:return t.next=8,Object(o["d"])(e.roleForm);case 8:e.getRoleListFn(),e.showDialog=!1;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancelRoles:function(){this.showDialog=!1},addRoleBtnFn:function(){this.showDialog=!0},roleDialogCloseFn:function(){this.$refs.roleForm.resetFields()},perDialogCloseFn:function(){this.permIds=[]},addPermissionFn:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(o["e"])({id:t.clickRoleId,permIds:e});case 2:t.getRoleListFn();case 3:case"end":return n.stop()}}),n)})))()}}},g=h,v=(n("4041"),Object(d["a"])(g,r,a,!1,null,"5aa4e3ec",null));t["default"]=v.exports},"6b6d":function(e,t,n){"use strict";n("55be")},"9a0c":function(e,t,n){var r=n("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},ed08:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));n("53ca"),n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("159b");function r(e,t){var n=[];return e.forEach((function(a){if(a.pid===t){var i=r(e,a.id);i.length&&(a.children=i),n.push(a)}})),n}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=new Date(24*(e-25567)*36e5-3e5-43e3-864e5-864e5);n.setYear(n.getFullYear());var r=n.getFullYear()+"",a=n.getMonth()+1+"",i=n.getDate()+"";return t&&1===t.length?r+t+a+t+i:r+(a<10?"0"+a:a)+(i<10?"0"+i:i)}},efd2:function(e,t,n){}}]);